(this["webpackJsonpreact-dynamic-form-builder"]=this["webpackJsonpreact-dynamic-form-builder"]||[]).push([[0],{26:function(e,n,t){"use strict";t.r(n);var a,r,c,o,i,s,l,d,u,j,b,p,O,h,g,f=t(1),x=t.n(f),m=t(14),v=t.n(m),y=t(5),C=function(e,n){switch(n.type){case"OPEN_ADD_OVERLAY":return{add_overlay:!0,add_callback:n.callback};case"CLOSE_ADD_OVERLAY":return{add_overlay:!1,add_callback:void 0};default:return e}},k=t(0),S={add_overlay:!1,add_callback:void 0},w=Object(f.createContext)(S),D=function(e){var n=e.children,t=Object(f.useReducer)(C,S),a=Object(y.a)(t,2),r=a[0],c=a[1];return Object(k.jsx)(w.Provider,{value:[r,c],children:n})},A=t(2),_=t(3),N=t(8),E=t(4),L=t(12),P=_.a.span(a||(a=Object(A.a)(["\n  background: #d8d8d8;\n  border: 1px solid darkgrey;\n  border-radius: 2px;\n  padding: 0 .25em;\n  float: right;\n  height: 21px;\n  max-height: 21px;\n  min-width: 21px;\n  font-family: 'Source Code Pro', monospace;\n  display: grid;\n  justify-content: center;\n  align-items: center;\n  line-height: 21px;\n  box-sizing: border-box;\n  cursor: pointer;\n  user-select: none;\n\n  &:hover {\n    background: #c1c1c1;\n  }\n"]))),R=_.a.div(r||(r=Object(A.a)(["\n  font-size: .75em;\n  margin-top: .35em;\n  text-align: right;\n"]))),F=_.a.span(c||(c=Object(A.a)(["\n  color: grey;\n  cursor: pointer;\n  user-select: none;\n  opacity: 0.5;\n  transition: all 200ms;\n  &:hover {\n    opacity: 1;\n  }\n"]))),J=Object(_.a)(F)(o||(o=Object(A.a)(["\n  &:hover {\n    color: #c30000;\n  }\n"]))),T=Object(_.a)(F)(i||(i=Object(A.a)(["\n  &:hover {\n    color: green;\n  }\n"]))),I=function(e){return Object(k.jsx)(R,{children:Object(k.jsxs)(T,Object(E.a)(Object(E.a)({className:"fa-stack fa-xs"},e),{},{children:[Object(k.jsx)("i",{className:"fas fa-square fa-stack-2x"}),Object(k.jsx)("i",{className:"fas fa-plus fa-stack-1x fa-inverse"})]}))})},V=function(e){return Object(k.jsx)(R,{children:Object(k.jsxs)(J,Object(E.a)(Object(E.a)({className:"fa-stack fa-xs"},e),{},{children:[Object(k.jsx)("i",{className:"fas fa-square fa-stack-2x"}),Object(k.jsx)("i",{className:"fas fa-minus fa-stack-1x fa-inverse"})]}))})},Y=P,z=_.a.fieldset(s||(s=Object(A.a)(["\n  background: rgb(47 106 158 / 10%);\n  box-sizing: border-box;\n  display: block;\n  width: auto;\n  border: 1px solid rgba(0,0,0,0.5);\n  margin: 0;\n  padding: .25em;\n  border-radius: 4px;\n  margin-bottom: .25em;\n  & > legend {\n    color: gray;\n  }\n"]))),M=function(e){var n=e.name,t=e.children,a=void 0===t?[]:t,r=e.onAdd;return Object(k.jsxs)(z,{children:[n&&Object(k.jsx)("legend",{children:n}),a,Object(k.jsx)(I,{onClick:function(){console.log("click"),r()},style:{marginRight:"1em"}})]},n||"root")},q=t(18),B=function e(n){var t=n.type,a=void 0===t?"string":t,r=n.hint,c=n.control,o=void 0===c?"input":c,i=n.properties,s=void 0===i?{}:i,l=n.onChange,d=void 0===l?function(e,n){return n(e.target.value)}:l;Object(q.a)(this,e),this.type=a,this.hint=r,this.control=o,this.properties=s,this.onChange=d},U=function(e){if("string"===typeof e&&!isNaN(Date.parse(e))&&"Invalid Date"!==new Date(e)){var n=new Date(e).toISOString().slice(0,-8);return new B({type:"date",control:"input",hint:"converted to UTZ",properties:{type:"datetime-local",value:n}})}},Z=function(e){if(!isNaN(e)&&!isNaN(parseFloat(e))){var n=function(e){var n=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/.exec(""+ +e);return n?Math.max(0,("0"===n[1]?0:(n[1]||"").length)-(n[2]||0)):0}(e),t="0."+"0".repeat(Math.max(n-1,0))+"1";return new B({type:"float",control:"input",properties:{type:"number",step:t,value:e}})}},$=function(e){if(parseInt(e).toString()===e.toString())return new B({type:"integer",control:"input",properties:{type:"number",value:e}})},G=function(e){if(!0===e||!1===e||"true"===e.toString().toLowerCase()||"false"===e.toString().toLowerCase()){var n=e||"true"===e.toString().toLowerCase();return new B({type:"boolean",control:"input",properties:{type:"checkbox",defaultChecked:n},onChange:function(n,t){return t(!e)}})}},H=function(e){var n=e.toString();return new B({type:"string",control:"input",properties:{type:"text",value:n}})},K=function(e){return $(e)||Z(e)||G(e)||U(e)||H(e)},Q=_.a.div(l||(l=Object(A.a)(["\n  display: grid;\n  grid-template-columns: 1fr 300px auto;\n  grid-column-gap: 1em;\n  margin: .5em 0;\n  padding: 0 1em;\n  & > label {\n    text-align: right;\n    line-height: 25px;\n  }\n"]))),W=function(e){var n=e.name,t=e.value,a=e.onChange,r=K(t),c=r.control,o=r.hint?"".concat(n," (").concat(r.hint,")"):n;return Object(k.jsxs)(Q,{children:[Object(k.jsx)("label",{htmlFor:n,children:o}),Object(k.jsx)(c,Object(E.a)(Object(E.a)({id:n},r.properties),{},{onChange:function(e){return r.onChange(e,a)}})),Object(k.jsx)(V,{})]},n)},X=function(e){var n=e.name,t=e.value,a=e.onChange,r=e.dispatch,c=function(e,n){var r=Object(L.a)(t);r[e]=n,a(r)},o=function(e){console.log("handleAdd",t,e);var n=Object(L.a)(t);n.push(e),a(n)};return Object(k.jsx)(M,{name:n,onAdd:function(){return r({type:"OPEN_ADD_OVERLAY",callback:o})},children:t.map((function(t,a){return Object(k.jsx)(ne,Object(E.a)(Object(E.a)({},e),{},{name:"[".concat(a,"]"),value:t,onChange:function(e){return c(a,e)}}),"".concat(n,"[").concat(a,"]"))}))})},ee=function(e){var n=e.name,t=e.value,a=e.onChange,r=e.dispatch,c=function(e,n){a(Object(E.a)(Object(E.a)({},t),{},Object(N.a)({},n,e)))};return Object(k.jsx)(M,{name:n,onAdd:function(){return r({type:"OPEN_ADD_OVERLAY",callback:c})},children:Object.entries(t).map((function(t){var a=Object(y.a)(t,2),r=a[0],o=a[1];return Object(k.jsx)(ne,Object(E.a)(Object(E.a)({},e),{},{name:r,value:o,onChange:function(e){return c(e,r)}}),"".concat(n,".").concat(r))}))})},ne=function(e){var n=e.value,t=e.onChange,a=function(e){t(e)};return Array.isArray(n)?Object(k.jsx)(X,Object(E.a)(Object(E.a)({},e),{},{onChange:a})):"object"===typeof n&&null!==n?Object(k.jsx)(ee,Object(E.a)(Object(E.a)({},e),{},{onChange:a})):Object(k.jsx)(W,Object(E.a)({},e))},te=ne,ae=function(e){var n=e.name,t=e.data,a=e.onChange,r=Object(f.useContext)(w),c=Object(y.a)(r,2),o=c[0],i=c[1];return Object(k.jsx)("form",{children:Object(k.jsx)(te,{name:n,value:t,onChange:a,state:o,dispatch:i})})},re=_.a.div(d||(d=Object(A.a)(["\n  display: grid;\n  margin: 2em;\n  border: 1px dashed lightgrey;\n  align-items: center;\n  justify-content: center;\n  height: 100px;\n  border-radius: 5px;\n"]))),ce=function(e){var n=e.children,t=e.onChange;return Object(k.jsx)(re,{onDragOver:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:function(e){e.stopPropagation(),e.preventDefault();var n=e.dataTransfer.files[0];n?t(n):console.log(e.dataTransfer)},children:n})},oe=_.a.div(u||(u=Object(A.a)(["\n  position: absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  display: grid;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0,0,0,0.5);\n"]))),ie=_.a.div(j||(j=Object(A.a)(["\n  background: white;\n  border: 1px solid grey;\n  border-radius: 10px;\n  padding: 1em 2em;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 1em;\n"]))),se=_.a.h3(b||(b=Object(A.a)(["\n  grid-column: 1/3;\n"]))),le=_.a.label(p||(p=Object(A.a)(["\n  display: grid;\n"]))),de=Object(_.a)(Y)(O||(O=Object(A.a)(["\n  grid-column: 1/3;\n"]))),ue=function(){var e=Object(f.useContext)(w),n=Object(y.a)(e,2),t=n[0],a=n[1],r=Object(f.useState)(""),c=Object(y.a)(r,2),o=c[0],i=c[1],s=Object(f.useState)("string"),l=Object(y.a)(s,2),d=l[0],u=l[1],j={array:[],object:{},string:"",int:1,float:.1,bool:!0};return Object(k.jsx)(oe,{children:Object(k.jsxs)(ie,{children:[Object(k.jsx)(se,{children:"Add property"}),Object(k.jsxs)(le,{children:["Property name",Object(k.jsx)("input",{type:"text",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(k.jsxs)(le,{children:["Type",Object(k.jsxs)("select",{name:"type",value:d,onChange:function(e){return u(e.target.value)},children:[Object(k.jsx)("option",{value:"null",children:"null"}),Object(k.jsx)("option",{value:"array",children:"Array"}),Object(k.jsx)("option",{value:"object",children:"Object"}),Object(k.jsx)("option",{value:"string",children:"String"}),Object(k.jsx)("option",{value:"int",children:"Int"}),Object(k.jsx)("option",{value:"float",children:"Float"}),Object(k.jsx)("option",{value:"bool",children:"Bool"})]})]}),Object(k.jsx)(de,{onClick:function(){t.add_callback(j[d],o),a({type:"CLOSE_ADD_OVERLAY"})},children:"Add"})]})})},je=_.a.section(h||(h=Object(A.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 1em;\n"]))),be=_.a.pre(g||(g=Object(A.a)(["\n  background: lightgray;\n  padding: 1em 1.5em;\n  border-radius: 4px;\n  font-family: 'Source Code Pro', monospace;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),pe=function(){var e=Object(f.useContext)(w),n=Object(y.a)(e,1)[0],t=Object(f.useState)("document"),a=Object(y.a)(t,2),r=a[0],c=a[1],o=Object(f.useState)("document"===r?{}:[]),i=Object(y.a)(o,2),s=i[0],l=i[1],d=Object(f.useState)(new File([],"")),u=Object(y.a)(d,2),j=u[0],b=u[1],p=Object(f.useState)([]),O=Object(y.a)(p,2),h=O[0],g=O[1];console.log(s);var x=function(e){console.log("new_type",e),c(e),l("document"===e?{}:[{}])};return Object(k.jsxs)("main",{children:[Object(k.jsx)("a",{href:"test_data.json",children:"Download test data"}),Object(k.jsxs)(je,{children:[Object(k.jsxs)("div",{children:[Object(k.jsxs)("label",{children:[Object(k.jsx)("input",{type:"radio",name:"type",value:"document",checked:"document"===r,onChange:function(){return x("document")}}),"Document"]}),Object(k.jsxs)("label",{children:[Object(k.jsx)("input",{type:"radio",name:"type",value:"collection",checked:"collection"===r,onChange:function(){return x("collection")}}),"Collection"]}),Object(k.jsx)(ae,{name:j.name,data:s,onChange:l})]}),Object(k.jsx)(be,{children:JSON.stringify(s,null,2)})]}),Object(k.jsx)(ce,{onChange:function(e){var n=new FileReader;n.onload=function(n){var t=JSON.parse(n.target.result),a="document"===r?{}:[];switch(typeof t){case"array":case"object":a=t;break;case"string":case"number":case"boolean":case"null":a={root:t};break;default:g([{title:"Parse error",message:"File did not contain a valid JSON document."}])}b(e),l(a)},n.readAsText(e)},children:"Drop a JSON file here"}),h.length>1&&Object(k.jsx)("pre",{children:h}),n.add_overlay&&Object(k.jsx)(ue,{})]})};v.a.render(Object(k.jsx)(x.a.StrictMode,{children:Object(k.jsx)(D,{children:Object(k.jsx)(pe,{})})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.48d09c71.chunk.js.map