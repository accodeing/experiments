{"version":3,"sources":["state/reducer.js","state/store.js","components/Button.js","components/DynamicForm/Fieldset.js","components/DynamicForm/TypeIdentification/TypeInfo.js","components/DynamicForm/TypeIdentification/isDate.js","components/DynamicForm/TypeIdentification/isFloat.js","components/DynamicForm/TypeIdentification/isInt.js","components/DynamicForm/TypeIdentification/isBool.js","components/DynamicForm/TypeIdentification/isString.js","components/DynamicForm/TypeIdentification/index.js","components/DynamicForm/Field.js","components/DynamicForm/FieldsetBuilder.js","components/DynamicForm/index.js","components/DynamicForm/Form.js","components/DropZone.js","components/AddOverlay.js","App.js","index.js"],"names":["Reducer","state","action","type","add_overlay","add_callback","callback","undefined","initialState","Context","createContext","Store","children","useReducer","dispatch","Provider","value","Button","styled","span","DownSize","div","Stack","RedStack","GreenStack","AddButton","props","className","RemoveButton","StyledFieldset","fieldset","Fieldset","name","onAdd","onClick","console","log","style","marginRight","TypeInfo","hint","control","properties","onChange","event","handler","target","this","isDate","isNaN","Date","parse","cohersed_value","toISOString","slice","isFloat","parseFloat","decimals","n","match","exec","Math","max","length","decimalPlaces","step","repeat","isInt","parseInt","toString","isBool","toLowerCase","defaultChecked","isString","coerced_value","TypeIdentification","Wrapper","Field","type_info","TagName","label","htmlFor","id","CollectionBuilder","handleChange","index","new_value","copy","handleAdd","push","map","item","DocumentBuilder","prop_name","Object","entries","key","FieldsetBuilder","Array","isArray","Form","data","useContext","Drop","DropZone","onDragOver","stopPropagation","preventDefault","dataTransfer","dropEffect","onDrop","file","files","AddOverlayBackdrop","AddOverlayPane","Title","h3","Label","Submit","AddOverlay","useState","setName","setType","default_values","SideBySide","section","Pre","pre","App","global_state","setState","File","setFile","errors","setErrors","new_type","href","checked","JSON","stringify","reader","FileReader","onload","result","json_document","root","title","message","readAsText","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.48d09c71.chunk.js","sourcesContent":["const Reducer = (state, action) => {\n  switch (action.type) {\n    case 'OPEN_ADD_OVERLAY':\n      return {\n        add_overlay: true,\n        add_callback: action.callback\n      };\n    case 'CLOSE_ADD_OVERLAY':\n    return {\n      add_overlay: false,\n      add_callback: undefined\n    };\n    default:\n      return state;\n  }\n};\n\nexport default Reducer;\n","import React, {createContext, useReducer} from \"react\";\nimport Reducer from './reducer'\n\n\nconst initialState = {\n    add_overlay: false,\n    add_callback: undefined\n};\n\nconst Store = ({ children }) => {\n  const [ state, dispatch ] = useReducer( Reducer, initialState );\n  return (\n    <Context.Provider value={[ state, dispatch ]}>\n      {children}\n    </Context.Provider>\n  )\n};\n\nexport const Context = createContext(initialState);\nexport default Store;\n","import styled from 'styled-components'\n\nconst Button = styled.span`\n  background: #d8d8d8;\n  border: 1px solid darkgrey;\n  border-radius: 2px;\n  padding: 0 .25em;\n  float: right;\n  height: 21px;\n  max-height: 21px;\n  min-width: 21px;\n  font-family: 'Source Code Pro', monospace;\n  display: grid;\n  justify-content: center;\n  align-items: center;\n  line-height: 21px;\n  box-sizing: border-box;\n  cursor: pointer;\n  user-select: none;\n\n  &:hover {\n    background: #c1c1c1;\n  }\n`;\n\nconst DownSize = styled.div`\n  font-size: .75em;\n  margin-top: .35em;\n  text-align: right;\n`;\n\nconst Stack = styled.span`\n  color: grey;\n  cursor: pointer;\n  user-select: none;\n  opacity: 0.5;\n  transition: all 200ms;\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst RedStack = styled(Stack)`\n  &:hover {\n    color: #c30000;\n  }\n`;\n\nconst GreenStack = styled(Stack)`\n  &:hover {\n    color: green;\n  }\n`;\n\nconst AddButton = props => (\n  <DownSize>\n    <GreenStack className=\"fa-stack fa-xs\" {...props}>\n      <i className=\"fas fa-square fa-stack-2x\" />\n      <i className=\"fas fa-plus fa-stack-1x fa-inverse\" />\n    </GreenStack>\n  </DownSize>\n)\n\nconst RemoveButton = props => (\n  <DownSize>\n    <RedStack className=\"fa-stack fa-xs\" {...props}>\n      <i className=\"fas fa-square fa-stack-2x\" />\n      <i className=\"fas fa-minus fa-stack-1x fa-inverse\" />\n    </RedStack>\n  </DownSize>\n)\n\nexport { AddButton, RemoveButton }\n\nexport default Button\n","import React from 'react';\nimport styled from 'styled-components'\n\nimport { AddButton } from 'components/Button'\n\nconst StyledFieldset = styled.fieldset`\n  background: rgb(47 106 158 / 10%);\n  box-sizing: border-box;\n  display: block;\n  width: auto;\n  border: 1px solid rgba(0,0,0,0.5);\n  margin: 0;\n  padding: .25em;\n  border-radius: 4px;\n  margin-bottom: .25em;\n  & > legend {\n    color: gray;\n  }\n`;\n\nconst Fieldset = ({ name, children = [], onAdd }) => (\n  <StyledFieldset key={ name || 'root' }>\n    { name && (<legend>{ name }</legend>) }\n    { children }\n    <AddButton onClick={ () => { console.log('click'); onAdd(); } } style={{ marginRight: \"1em\" }} />\n  </StyledFieldset>\n)\n\nexport default Fieldset\n","class TypeInfo {\n  constructor({ type = 'string', hint, control = 'input', properties = {}, onChange = ( event, handler ) => handler(event.target.value) }) {\n    this.type = type;\n    this.hint = hint;\n    this.control = control;\n    this.properties = properties;\n    this.onChange = onChange;\n  }\n}\n\nexport default TypeInfo\n","import TypeInfo from './TypeInfo'\n\nconst isDate = ( value ) => {\n  if( typeof value !== 'string' || ( isNaN(Date.parse( value )) || new Date( value ) === 'Invalid Date' )){\n    return\n  }\n\n  const cohersed_value = new Date( value ).toISOString().slice(0,-8)\n\n  return new TypeInfo({\n    type: 'date',\n    control: 'input',\n    hint: 'converted to UTZ',\n    properties: { type: 'datetime-local', value: cohersed_value }\n  });\n}\n\nexport default isDate;\n","import TypeInfo from './TypeInfo'\n\n// https://stackoverflow.com/a/9539746\nconst decimalPlaces = ( n ) => {\n  // Make sure it is a number and use the builtin number -> string.\n  var s = \"\" + (+n);\n  // Pull out the fraction and the exponent.\n  var match = /(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/.exec(s);\n  // NaN or Infinity or integer.\n  // We arbitrarily decide that Infinity is integral.\n  if (!match) { return 0; }\n  // Count the number of digits in the fraction and subtract the\n  // exponent to simulate moving the decimal point left by exponent places.\n  // 1.234e+2 has 1 fraction digit and '234'.length -  2 == 1\n  // 1.234e-2 has 5 fraction digit and '234'.length - -2 == 5\n  return Math.max(\n      0,  // lower limit.\n      (match[1] === '0' ? 0 : (match[1] || '').length)  // fraction length\n      - (match[2] || 0));  // exponent\n}\n\nconst isFloat = ( value ) => {\n  if( !isNaN( value ) && !isNaN( parseFloat( value ))){\n    const decimals = decimalPlaces( value );\n    const step = '0.' + '0'.repeat( Math.max(decimals -1, 0)) + '1';\n\n    return new TypeInfo({\n      type: 'float',\n      control: 'input',\n      properties: { type: 'number', step, value }\n    })\n  }\n}\n\nexport default isFloat;\n","import TypeInfo from './TypeInfo'\n\nconst isInt = ( value ) => {\n  if( parseInt( value ).toString() === value.toString() ){\n    return new TypeInfo({\n      type: 'integer',\n      control: 'input',\n      properties: { type: 'number', value }\n    })\n  }\n}\n\nexport default isInt;\n","import TypeInfo from './TypeInfo'\n\nconst isBool = ( value ) => {\n  if( value !== true && value !== false && value.toString().toLowerCase() !== 'true' && value.toString().toLowerCase() !== 'false' ){\n    return\n  }\n\n  const cohersed_value = value || value.toString().toLowerCase() === 'true'\n\n  return new TypeInfo({\n    type: 'boolean',\n    control: 'input',\n    properties: { type: 'checkbox', defaultChecked: cohersed_value },\n    onChange: ( event, handler ) => handler( !value )\n  })\n}\n\nexport default isBool;\n","import TypeInfo from './TypeInfo'\n\nconst isString = ( value ) => {\n  const coerced_value = value.toString();\n\n  return new TypeInfo({\n    type: 'string',\n    control: 'input',\n    properties:{\n      type: 'text',\n      value: coerced_value\n    }\n  })\n}\n\nexport default isString\n","import isDate from './isDate';\nimport isFloat from './isFloat';\nimport isInt from './isInt';\nimport isBool from './isBool';\nimport isString from './isString';\n\nconst TypeIdentification = ( value ) => {\n  return isInt( value ) ||\n         isFloat( value ) ||\n         isBool( value ) ||\n         isDate( value ) ||\n         isString( value )\n}\n\nexport default TypeIdentification\n","import React from 'react';\nimport styled from 'styled-components'\n\nimport { RemoveButton } from 'components/Button'\nimport TypeIdentification from './TypeIdentification'\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 300px auto;\n  grid-column-gap: 1em;\n  margin: .5em 0;\n  padding: 0 1em;\n  & > label {\n    text-align: right;\n    line-height: 25px;\n  }\n`;\n\nconst Field = ({ name, value, onChange }) => {\n  const type_info = TypeIdentification( value );\n\n  const TagName = type_info.control\n  const label = type_info.hint ? `${ name } (${type_info.hint})` : name\n\n  return (\n    <Wrapper key={ name }>\n      <label htmlFor={ name }>{ label }</label>\n      <TagName\n        id={ name }\n        { ...type_info.properties }\n        onChange={ ( event ) => type_info.onChange( event, onChange )}\n      />\n      <RemoveButton />\n    </Wrapper>\n  )\n}\n\nexport default Field\n","import React from 'react';\n\nimport Fieldset from './Fieldset'\nimport Field from './Field'\n\nconst CollectionBuilder = props => {\n  const { name, value, onChange, dispatch } = props;\n\n  const handleChange = ( index, new_value ) => {\n    const copy = [ ...value ];\n    copy[ index ] = new_value;\n    onChange( copy );\n  }\n\n  const handleAdd = ( new_value ) => {\n    console.log( 'handleAdd', value, new_value )\n    const copy = [ ...value ];\n    copy.push( new_value );\n    onChange( copy );\n  }\n\n  // const handleRemove = ( index ) => {\n  //   const copy = [ ...value ];\n  //   copy.splice( index, 1 );\n  //   onChange( copy );\n  // }\n\n  return (\n    <Fieldset name={ name } onAdd={ () => dispatch({ type: 'OPEN_ADD_OVERLAY', callback: handleAdd }) }>\n      { value.map((item, index) => <FieldsetBuilder key={ `${name}[${index}]` } {...props} name={`[${index}]`} value={ item } onChange={( value ) => handleChange( index, value )} />) }\n    </Fieldset>\n  );\n}\n\nconst DocumentBuilder = props => {\n  const { name, value, onChange, dispatch } = props;\n\n  const handleChange = ( new_value, prop_name ) => {\n    onChange({\n      ...value,\n      [ prop_name ]: new_value\n    })\n  }\n\n  return (\n    <Fieldset name={ name } onAdd={ () => dispatch({ type: 'OPEN_ADD_OVERLAY', callback: handleChange }) }>\n      { Object.entries( value ).map(([key, item]) => <FieldsetBuilder key={ `${name}.${key}` } {...props} name={ key } value={ item } onChange={( value ) => handleChange( value, key )} />) }\n    </Fieldset>\n  );\n}\n\nconst FieldsetBuilder = props => {\n  const { value, onChange } = props;\n  const handleChange = ( new_value ) => {\n    onChange( new_value )\n  }\n\n  if( Array.isArray( value )){\n      return (<CollectionBuilder {...props} onChange={ handleChange } />);\n  } else if( typeof value === 'object' && value !== null ){\n      return (<DocumentBuilder {...props} onChange={ handleChange } />);\n  } else {\n      return (<Field {...props}/>)\n  }\n}\n\nexport default FieldsetBuilder;\n","import Form from './Form'\nexport default Form\n","import React, { useContext } from 'react';\n\nimport { Context } from 'state/store'\nimport FieldsetBuilder from './FieldsetBuilder'\n\nconst Form = ({ name, data, onChange }) => {\n  const [ state, dispatch ] = useContext( Context );\n\n  return (\n    <form>\n      <FieldsetBuilder name={ name } value={ data } onChange={ onChange } state={ state } dispatch={ dispatch } />\n    </form>\n  )\n}\n\nexport default Form;\n","import React from 'react'\nimport styled from 'styled-components'\n\n\nconst Drop = styled.div`\n  display: grid;\n  margin: 2em;\n  border: 1px dashed lightgrey;\n  align-items: center;\n  justify-content: center;\n  height: 100px;\n  border-radius: 5px;\n`;\n\nconst DropZone = ({ children, onChange }) => {\n\n  const handleDrop = ( event ) => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const file = event.dataTransfer.files[0];\n    if( file ){\n      onChange( file )\n    } else {\n      console.log( event.dataTransfer )\n    }\n  }\n\n  const handleDragOver = ( event ) => {\n    event.stopPropagation();\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'copy';\n  }\n\n  return(\n    <Drop onDragOver={ handleDragOver } onDrop={ handleDrop }>{children}</Drop>\n  )\n}\n\nexport default DropZone\n","import React, { useState, useContext } from 'react';\nimport styled from 'styled-components'\n\nimport { Context } from 'state/store'\nimport Button from 'components/Button'\n\nconst AddOverlayBackdrop = styled.div`\n  position: absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  display: grid;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0,0,0,0.5);\n`\n\nconst AddOverlayPane = styled.div`\n  background: white;\n  border: 1px solid grey;\n  border-radius: 10px;\n  padding: 1em 2em;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 1em;\n`;\n\nconst Title = styled.h3`\n  grid-column: 1/3;\n`;\n\nconst Label = styled.label`\n  display: grid;\n`;\n\nconst Submit = styled(Button)`\n  grid-column: 1/3;\n`;\n\nconst AddOverlay = () => {\n  const [ state, dispatch ] = useContext( Context );\n  const [ name, setName ] = useState('')\n  const [ type, setType ] = useState('string')\n\n  const default_values = {\n    'array': [],\n    'object': {},\n    'string': \"\",\n    'int': 1,\n    'float': 0.1,\n    'bool': true,\n  }\n\n  const handleAdd = () => {\n    state.add_callback( default_values[ type ], name )\n    dispatch({ type: 'CLOSE_ADD_OVERLAY' })\n  }\n\n  return (\n    <AddOverlayBackdrop>\n      <AddOverlayPane>\n        <Title>Add property</Title>\n        <Label>\n          Property name\n          <input type=\"text\" value={ name } onChange={ ( event ) => setName( event.target.value )}></input>\n        </Label>\n        <Label>\n          Type\n          <select name=\"type\" value={ type } onChange={ ( event ) => setType( event.target.value )}>\n            <option value=\"null\">null</option>\n            <option value=\"array\">Array</option>\n            <option value=\"object\">Object</option>\n            <option value=\"string\">String</option>\n            <option value=\"int\">Int</option>\n            <option value=\"float\">Float</option>\n            <option value=\"bool\">Bool</option>\n          </select>\n        </Label>\n        <Submit onClick={ handleAdd }>Add</Submit>\n      </AddOverlayPane>\n    </AddOverlayBackdrop>\n  )\n}\n\nexport default AddOverlay\n","import React, { useState, useContext } from 'react';\nimport styled from 'styled-components'\n\nimport { Context } from 'state/store'\nimport Form from 'components/DynamicForm'\nimport DropZone from 'components/DropZone'\nimport AddOverlay from 'components/AddOverlay'\n\n\nconst SideBySide = styled.section`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 1em;\n`\n\nconst Pre = styled.pre`\n  background: lightgray;\n  padding: 1em 1.5em;\n  border-radius: 4px;\n  font-family: 'Source Code Pro', monospace;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst App = () => {\n  const [ global_state ] = useContext( Context );\n  const [ type, setType ] = useState( 'document' )\n  const [ state, setState ] = useState( type === 'document' ? {} : [] )\n  const [ file, setFile ] = useState( new File([], '') )\n  const [ errors, setErrors ] = useState( [] )\n\n  const handleDrop = ( file ) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const result = JSON.parse( event.target.result )\n      let json_document = type === 'document' ? {} : []\n\n      switch (typeof result) {\n        case 'array':\n          json_document = result;\n          break;\n        case 'object':\n          json_document = result;\n          break;\n        case 'string':\n        case 'number':\n        case 'boolean':\n        case 'null':\n          json_document = { root: result }\n          break;\n        default:\n          setErrors([{ title: 'Parse error', message: 'File did not contain a valid JSON document.' }])\n          break;\n      }\n\n      setFile( file )\n      setState( json_document )\n    };\n    reader.readAsText(file);\n  }\n\n  console.log( state );\n\n  const handleChange = ( new_type ) => {\n    console.log('new_type', new_type)\n    setType(new_type)\n    setState(new_type === 'document' ? {} : [{}])\n  }\n\n  return (\n      <main>\n        <a href=\"test_data.json\">Download test data</a>\n        <SideBySide>\n          <div>\n            <label>\n              <input\n                type=\"radio\"\n                name=\"type\"\n                value=\"document\"\n                checked={type === 'document'}\n                onChange={ () => handleChange('document') }\n              />\n              Document\n            </label>\n            <label>\n              <input\n                type=\"radio\"\n                name=\"type\"\n                value=\"collection\"\n                checked={type === 'collection'}\n                onChange={ () => handleChange('collection') }\n              />\n              Collection\n            </label>\n            <Form name={ file.name } data={ state } onChange={ setState } />\n          </div>\n          <Pre>{ JSON.stringify( state, null, 2 ) }</Pre>\n        </SideBySide>\n        <DropZone onChange={handleDrop}>Drop a JSON file here</DropZone>\n        { errors.length > 1 && <pre>{ errors }</pre>}\n        { global_state.add_overlay && <AddOverlay /> }\n      </main>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Store from 'state/store'\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Store>\n      <App />\n    </Store>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}